<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Context</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noticia+Text:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link href="../index.css" rel="stylesheet" />
  </head>

  <body>
    <!-- SAME HEADER -->
    <header class="masthead py-2">
      <nav class="navbar navbar-expand-md navbar-dark">
        <div class="container">
          <a
            class="navbar-brand site-logo text-white"
            href="../index.html"
            style="font-family: 'Noticia Text', serif"
          >
            Systems of Oppression<span class="text-warning">.</span>
          </a>

          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#mainNavbar"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="mainNavbar">
            <ul
              class="navbar-nav ms-auto mb-2 mb-md-0"
              style="font-family: 'Noticia Text', serif"
            >
              <li class="nav-item">
                <a class="nav-link" href="../index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../html/letters.html">Letters</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../html/context.html">Context</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../html/quizzes.html">Quizzes</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../html/about.html">About us</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- MAIN CONTENT -->
    <main class="container mt-5">
      <!-- Title -->
      <h1
        id="contextTitle"
        class="mb-3"
        style="font-family: 'Noticia Text', serif"
      ></h1>

      <!-- Date -->
      <p id="contextDate" class="text-muted"></p>

      <!-- Image -->
      <img
        id="contextImage"
        class="img-fluid rounded mb-4"
        style="width: 100%; object-fit: cover"
      />

      <!-- Content -->
      <article
        id="contextContent"
        class="mt-4"
        style="
          font-family: 'Mulish', sans-serif;
          line-height: 1.7;
          white-space: pre-wrap;
        "
      ></article>
    </main>

    <!-- FOOTER -->
    <footer class="container-fluid py-3" style="background-color: #f8f9fa">
      <div class="container">
        <div class="row align-items-center">
          <!-- Left Side: Logo + Inspired text -->
          <div class="col-md-6 d-flex align-items-center">
            <a
              class="navbar-brand site-logo"
              href="./index.html"
              style="font-family: 'Noticia Text', serif; color: #052962"
            >
              Systems of Oppression<span class="text-warning">.</span>
            </a>
            <span class="ms-2 text-muted" style="font-size: 0.9rem">
              inspired by the Guardian
            </span>
          </div>

          <!-- Right Side: Header navigation items -->
          <div class="col-md-6">
            <ul
              class="nav justify-content-md-end"
              style="font-family: 'Mulish', serif; font-size: 0.95rem"
            >
              <li class="nav-item">
                <a class="nav-link text-dark" href="./index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-dark" href="./html/letters.html"
                  >Letters</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link text-dark" href="./html/context.html"
                  >Context</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link text-dark" href="./html/quizzes.html"
                  >Quizzes</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link text-dark" href="./html/about.html"
                  >About us</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

    <!-- SCRIPT: Load context -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const params = new URLSearchParams(window.location.search);
      const id = params.get("id");

      fetch("../json/context.json")
        .then((res) => res.json())
        .then((data) => {
          const item = data.context[id];

          if (!item) {
            document.getElementById("contextTitle").textContent =
              "Context not found.";
            return;
          }

          document.getElementById("contextTitle").textContent = item.title;
          document.getElementById("contextDate").textContent = item.date;
          document.getElementById("contextImage").src = item.image;

          // Supports paragraphs + HTML links if needed
          document.getElementById("contextContent").innerHTML = item.content;
        });
    </script>
  </body>
</html>
