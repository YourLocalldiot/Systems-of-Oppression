<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Quizzes</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noticia+Text:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link href="../index.css" rel="stylesheet" />

    <style>
      body {
        font-family: "Mulish", sans-serif;
      }
      h1,
      h2,
      h3,
      h4,
      h5 {
        font-family: "Noticia Text", serif;
      }
      .question-card {
        border-left: 4px solid #052962;
        padding-left: 15px;
      }
    </style>
  </head>

  <body>
    <!-- HEADER -->
    <header class="masthead py-2">
      <nav class="navbar navbar-expand-md navbar-dark">
        <div class="container">
          <a
            class="navbar-brand site-logo text-white"
            href="../index.html"
            style="font-family: 'Noticia Text', serif"
          >
            Systems of Oppression<span class="text-warning">.</span>
          </a>

          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#mainNavbar"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="mainNavbar">
            <ul
              class="navbar-nav ms-auto mb-2 mb-md-0"
              style="font-family: 'Noticia Text', serif"
            >
              <li class="nav-item">
                <a class="nav-link" href="../index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../html/letters.html">Letters</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../html/context.html">Context</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="../html/quizzes.html"
                  >Quizzes</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../html/about.html">About us</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- MAIN CONTENT -->
    <main class="container mt-5">
      <h1 class="mb-4">Knowledge Check Quiz</h1>
      <p>A little quiz to check your understanding of our letters!</p>
      <div id="quizContainer"></div>

      <button id="submitQuiz" class="btn btn-primary mt-4">Submit Quiz</button>

      <div id="quizResult" class="mt-4 fs-4 fw-bold"></div>
    </main>

    <!-- FOOTER -->
    <footer class="container-fluid py-3" style="background-color: #f8f9fa">
      <div class="container">
        <div class="row align-items-center">
          <!-- Left Side: Logo + Inspired text -->
          <div class="col-md-6 d-flex align-items-center">
            <a
              class="navbar-brand site-logo"
              href="./index.html"
              style="font-family: 'Noticia Text', serif; color: #052962"
            >
              Systems of Oppression<span class="text-warning">.</span>
            </a>
            <span class="ms-2 text-muted" style="font-size: 0.9rem">
              inspired by the Guardian
            </span>
          </div>

          <!-- Right Side: Header navigation items -->
          <div class="col-md-6">
            <ul
              class="nav justify-content-md-end"
              style="font-family: 'Mulish', serif; font-size: 0.95rem"
            >
              <li class="nav-item">
                <a class="nav-link text-dark" href="./index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-dark" href="./html/letters.html"
                  >Letters</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link text-dark" href="./html/context.html"
                  >Context</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link text-dark" href="./html/quizzes.html"
                  >Quizzes</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link text-dark" href="./html/about.html"
                  >About us</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

    <!-- SCRIPT -->
    <script>
      fetch("../json/quizzes.json")
        .then((res) => res.json())
        .then((data) => {
          const quiz = data.questions;
          const container = document.getElementById("quizContainer");

          quiz.forEach((q, i) => {
            const card = document.createElement("div");
            card.className = "mb-4 p-3 question-card";

            card.innerHTML = `
          <h5>${i + 1}. ${q.question}</h5>
          <div>
            ${q.options
              .map(
                (opt, idx) => `
              <div class="form-check">
                <input class="form-check-input" type="radio" name="q${i}" value="${idx}">
                <label class="form-check-label">${opt}</label>
              </div>
            `
              )
              .join("")}
          </div>
        `;

            container.appendChild(card);
          });

          document
            .getElementById("submitQuiz")
            .addEventListener("click", () => {
              let score = 0;

              quiz.forEach((q, i) => {
                const answer = document.querySelector(
                  `input[name="q${i}"]:checked`
                );
                if (answer && parseInt(answer.value) === q.answer) {
                  score++;
                }
              });

              // Score comment logic
              let comment = "";

              if (score === 0) {
                comment =
                  "It's pretty impressive that you got a 0 bro. üíÄüíÄüíÄüôèüôèüôè";
              } else if (score < 4) {
                comment = "Go read them again! üôèüôèüôè";
              } else if (score < 8) {
                comment = "Nahhhhh! üíÄüíÄüíÄ Lock in bro. üôèüôèüôè";
              } else if (score < 12) {
                comment = "Nice one. You passed. ‚úÖ‚úÖ‚úÖ";
              } else if (score < 16) {
                comment = "Let's go! ‚úÖ‚úÖ‚úÖüíØüíØüíØ";
              } else if (score === 16) {
                comment = "Impeccable! Too easy right? ‚úÖ‚úÖ‚úÖüíØüíØüíØü§Øü§Øü§Ø";
              }
              document.getElementById(
                "quizResult"
              ).innerHTML = `<strong>You scored ${score} / ${quiz.length}</strong><br>${comment}`;
            });
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
